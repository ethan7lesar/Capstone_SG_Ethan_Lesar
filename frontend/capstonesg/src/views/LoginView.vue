<template>
  <form
    @submit.prevent="userLogin"
    class="items-center justify-center text-center w-fit rounded-[30px] border-main border-[2px] p-10 bg-contrast my-6 mx-auto flex flex-col gap-5 mb-36"
    id="form"
  >
    <div class="heading mx-auto">
      <svg
      width="161"
      height="40"
      viewBox="0 0 161 40"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M20 40C31.0458 40 40 31.0457 40 20C40 8.9543 31.0458 0 20 0C8.95429 0 0 8.9543 0 20C0 31.0457 8.95429 40 20 40ZM23.087 15.4526C24.7918 13.7477 24.7918 10.9836 23.087 9.27866C21.3821 7.57378 18.618 7.57378 16.9131 9.27866C15.2083 10.9836 15.2083 13.7477 16.9131 15.4526L20 18.5395L23.087 15.4526ZM24.5475 23.087C26.2524 24.7919 29.0165 24.7919 30.7214 23.087C32.4262 21.3821 32.4262 18.618 30.7214 16.9131C29.0165 15.2083 26.2524 15.2083 24.5475 16.9131L21.4606 20.0001L24.5475 23.087ZM23.087 30.7214C24.7918 29.0165 24.7918 26.2524 23.087 24.5475L20 21.4606L16.9131 24.5475C15.2083 26.2524 15.2083 29.0165 16.9131 30.7214C18.618 32.4263 21.3821 32.4263 23.087 30.7214ZM9.27863 23.087C7.57379 21.3821 7.57379 18.618 9.27863 16.9131C10.9836 15.2083 13.7477 15.2083 15.4526 16.9131L18.5395 20.0001L15.4526 23.087C13.7477 24.7919 10.9836 24.7919 9.27863 23.087Z"
        fill="#F6EA00"
      />
      <path
        d="M53.534 13.4C55.118 13.4 56.42 13.724 57.44 14.372C58.46 15.008 58.982 15.956 59.006 17.216V17.432H55.28V17.36C55.28 17 55.148 16.7 54.884 16.46C54.62 16.22 54.218 16.1 53.678 16.1C53.15 16.1 52.742 16.178 52.454 16.334C52.178 16.49 52.04 16.682 52.04 16.91C52.04 17.234 52.232 17.474 52.616 17.63C53 17.786 53.618 17.948 54.47 18.116C55.466 18.32 56.282 18.536 56.918 18.764C57.566 18.98 58.13 19.34 58.61 19.844C59.09 20.348 59.336 21.032 59.348 21.896C59.348 23.36 58.85 24.446 57.854 25.154C56.87 25.862 55.55 26.216 53.894 26.216C51.962 26.216 50.456 25.892 49.376 25.244C48.308 24.596 47.774 23.45 47.774 21.806H51.536C51.536 22.43 51.698 22.85 52.022 23.066C52.346 23.27 52.85 23.372 53.534 23.372C54.038 23.372 54.452 23.318 54.776 23.21C55.112 23.102 55.28 22.88 55.28 22.544C55.28 22.244 55.094 22.022 54.722 21.878C54.362 21.722 53.768 21.56 52.94 21.392C51.932 21.176 51.098 20.954 50.438 20.726C49.778 20.486 49.202 20.096 48.71 19.556C48.218 19.016 47.972 18.284 47.972 17.36C47.972 16.004 48.494 15.008 49.538 14.372C50.594 13.724 51.926 13.4 53.534 13.4ZM67.9642 26L67.7302 24.56C67.3582 25.076 66.8662 25.484 66.2542 25.784C65.6542 26.072 65.0182 26.216 64.3462 26.216C63.2422 26.216 62.4142 25.91 61.8622 25.298C61.3102 24.686 61.0342 23.804 61.0342 22.652V16.496H64.6162V22.22C64.6162 22.628 64.7182 22.958 64.9222 23.21C65.1382 23.45 65.4382 23.57 65.8222 23.57C66.2662 23.57 66.6262 23.426 66.9022 23.138C67.1782 22.85 67.3162 22.496 67.3162 22.076V16.496H70.8982V26H67.9642ZM73.2021 15.38V12.95H76.7841V15.38H73.2021ZM73.2021 26V16.496H76.7841V26H73.2021ZM91.5444 13.4C92.7324 13.4 93.8004 13.58 94.7484 13.94C95.6964 14.3 96.4464 14.834 96.9984 15.542C97.5624 16.238 97.8444 17.09 97.8444 18.098H94.0464C94.0464 17.582 93.8184 17.168 93.3624 16.856C92.9064 16.532 92.3544 16.37 91.7064 16.37C90.7704 16.37 90.0624 16.622 89.5824 17.126C89.1024 17.618 88.8624 18.32 88.8624 19.232V20.384C88.8624 21.296 89.1024 22.004 89.5824 22.508C90.0624 23 90.7704 23.246 91.7064 23.246C92.3544 23.246 92.9064 23.096 93.3624 22.796C93.8184 22.484 94.0464 22.088 94.0464 21.608H91.2384V19.088H97.8444V26H95.7924L95.3964 24.776C94.2684 25.736 92.7924 26.216 90.9684 26.216C88.9164 26.216 87.3744 25.682 86.3424 24.614C85.3104 23.534 84.7944 21.932 84.7944 19.808C84.7944 17.708 85.3764 16.118 86.5404 15.038C87.7164 13.946 89.3844 13.4 91.5444 13.4ZM104.973 16.28C106.713 16.28 108.039 16.688 108.951 17.504C109.875 18.32 110.337 19.568 110.337 21.248V21.86H103.209C103.209 22.544 103.359 23.06 103.659 23.408C103.971 23.756 104.457 23.93 105.117 23.93C105.717 23.93 106.155 23.804 106.431 23.552C106.719 23.3 106.863 22.964 106.863 22.544H110.337C110.337 23.696 109.899 24.596 109.023 25.244C108.147 25.892 106.869 26.216 105.189 26.216C103.425 26.216 102.057 25.808 101.085 24.992C100.113 24.164 99.6265 22.916 99.6265 21.248C99.6265 19.616 100.101 18.38 101.049 17.54C101.997 16.7 103.305 16.28 104.973 16.28ZM105.117 18.566C103.989 18.566 103.359 19.1 103.227 20.168H106.719C106.719 19.676 106.575 19.286 106.287 18.998C106.011 18.71 105.621 18.566 105.117 18.566ZM118.616 16.28C119.72 16.28 120.548 16.586 121.1 17.198C121.652 17.81 121.928 18.692 121.928 19.844V26H118.346V20.276C118.346 19.868 118.238 19.544 118.022 19.304C117.818 19.052 117.524 18.926 117.14 18.926C116.696 18.926 116.336 19.07 116.06 19.358C115.784 19.646 115.646 20 115.646 20.42V26H112.064V16.496H114.998L115.232 17.936C115.604 17.432 116.09 17.03 116.69 16.73C117.302 16.43 117.944 16.28 118.616 16.28ZM128.984 16.28C130.724 16.28 132.05 16.688 132.962 17.504C133.886 18.32 134.348 19.568 134.348 21.248V21.86H127.22C127.22 22.544 127.37 23.06 127.67 23.408C127.982 23.756 128.468 23.93 129.128 23.93C129.728 23.93 130.166 23.804 130.442 23.552C130.73 23.3 130.874 22.964 130.874 22.544H134.348C134.348 23.696 133.91 24.596 133.034 25.244C132.158 25.892 130.88 26.216 129.2 26.216C127.436 26.216 126.068 25.808 125.096 24.992C124.124 24.164 123.638 22.916 123.638 21.248C123.638 19.616 124.112 18.38 125.06 17.54C126.008 16.7 127.316 16.28 128.984 16.28ZM129.128 18.566C128 18.566 127.37 19.1 127.238 20.168H130.73C130.73 19.676 130.586 19.286 130.298 18.998C130.022 18.71 129.632 18.566 129.128 18.566ZM141.854 16.262C142.13 16.262 142.376 16.298 142.592 16.37C142.808 16.43 142.916 16.466 142.916 16.478V19.484H141.764C141.02 19.484 140.48 19.676 140.144 20.06C139.82 20.444 139.658 21.014 139.658 21.77V26H136.076V16.496H139.01L139.244 17.936C139.46 17.384 139.802 16.97 140.27 16.694C140.738 16.406 141.266 16.262 141.854 16.262ZM144.2 15.38V12.95H147.782V15.38H144.2ZM144.2 26V16.496H147.782V26H144.2ZM154.586 16.28C155.858 16.28 156.932 16.532 157.808 17.036C158.696 17.528 159.14 18.296 159.14 19.34H155.81C155.81 18.992 155.654 18.746 155.342 18.602C155.126 18.482 154.856 18.422 154.532 18.422C153.668 18.422 153.236 18.626 153.236 19.034C153.236 19.262 153.386 19.424 153.686 19.52C153.986 19.616 154.478 19.718 155.162 19.826C156.002 19.946 156.704 20.09 157.268 20.258C157.832 20.414 158.324 20.702 158.744 21.122C159.164 21.53 159.374 22.106 159.374 22.85C159.374 24.062 158.918 24.926 158.006 25.442C157.106 25.958 155.924 26.216 154.46 26.216C153.62 26.216 152.828 26.102 152.084 25.874C151.34 25.634 150.734 25.268 150.266 24.776C149.798 24.284 149.564 23.66 149.564 22.904H152.894V22.976C152.906 23.384 153.074 23.672 153.398 23.84C153.734 23.996 154.088 24.074 154.46 24.074C155.456 24.074 155.954 23.84 155.954 23.372C155.954 23.132 155.798 22.958 155.486 22.85C155.174 22.742 154.664 22.628 153.956 22.508C153.104 22.364 152.402 22.208 151.85 22.04C151.31 21.872 150.836 21.59 150.428 21.194C150.02 20.786 149.816 20.222 149.816 19.502C149.816 18.338 150.254 17.51 151.13 17.018C152.018 16.526 153.17 16.28 154.586 16.28Z"
        fill="white"
      />
    </svg>
      <h1 class="text-secondary text-[40px]">Login</h1>
    </div>
    <div class="imputs flex flex-col gap-7">
      <div class="flex justify-between gap-5 text-center">
        <label for="" class="my-auto">Email:</label>
        <input type="email" name="emailAdd" id="emailAdd" v-model="emailAdd" />
      </div>
      <div class="flex justify-between gap-5 text-center">
        <label class="my-auto">Password:</label>
        <input
          type="password"
          name="userPass"
          id="userPass"
          v-model="userPass"
        />
      </div>
    </div>
    <div class="btnandlink flex flex-col gap-3 mt-4">
      <button
        type="submit"
        class="border-[2px] border-main bg-detail rounded-[30px] p-2 text-[20px]"
      >
        Login
      </button>
      <p>Need an account ?</p>
      <router-link to="/register" class="text-detail text-[25px] w-fit mx-auto"
        >Register</router-link
      >
    </div>
  </form>
</template>

<script>
import Swal from "sweetalert2";
export default {
  data() {
    return {
      emailAdd: "",
      userPass: "",
    };
  },
  beforeCreate() {
    this.$store.dispatch("cookieCheck");
  },
  methods: {
    async userLogin() {
      console.log("Reached");
      try {
        const payload = {
          emailAdd: this.emailAdd,
          userPass: this.userPass,
        };
        const resp = await this.$store.dispatch("login", payload);
        console.log(resp);
        if (resp.success === true && resp.token && resp.result) {
          await Swal.fire({
            icon: "success",
            title: "Logged in Successfully",
            text: "You are now logged in!",
            background: "#000000",
            color: "#F6EA00",
          });
          this.$router.push("/");
        } else {
          const errMsg = "Unexpected error";
          await Swal.fire({
            icon: "error",
            title: "Login failed",
            text: errMsg,
            background: "#000000",
            color: "#F6EA00",
          });
        }
      } catch (e) {
        console.error("Error while logging in: ", e);
      }
    },
  },
};
</script>

<style scoped>
input {
  border-radius: 20px;
  border: 1px solid rgba(246, 234, 0, 0.83);
  background: linear-gradient(0deg, #000 0%, #000 100%), rgba(246, 234, 0, 0);
  width: fit-content;
  margin-block-end: auto;
  height: 35px;
  flex-shrink: 0;
  color: white;
  font-family: "Archivo Black", sans-serif;
  padding-left: 18px;
}

label {
  color: #f6ea00;
}

form:hover {
  box-shadow: 0px 10px 4px 0px #f6ea00;
}
form {
  transition: 0.8s;
}

button:hover {
  color: black;
  background: #f6ea00;
box-shadow: 0 0 30px 5px #f6ea00;
-webkit-transition: all 0.2s ease-out;
-moz-transition: all 0.2s ease-out;
transition: all 0.2s ease-out;
}

a:hover {
  border-bottom: 2px solid #f6ea00;
}

@media screen and (max-width:400px) {
  input{
    width: fit-content;
    height: fit-content;
    font-size: 12px;
    padding-left: 2px;
  }

  label{
    font-size: 12px;
  }
  h1{
    font-size: 30px;
  }
  button{
    font-size: 15px;
    padding: 2px;
  }
  a{
    font-size: 15px;
  }
  #form {
    padding-inline: 15px !important;
  }
}
</style>
